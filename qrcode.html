<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Code - Fitness Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="wrapper">

  <!-- Header -->
  <div class="login-header">
    <div class="header-left">
      <img src="assets/images/logo.png" alt="Logo">
    </div>
    <div class="header-middle">Fitness Studio</div>
    <div class="header-right">
      Receptionist | <a href="login.html">Logout</a>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="nav">
    <a href="mainmenu.html">Dashboard</a>
    <a href="services.html">Services</a>
    <a href="membershipplans.html">Plans</a>
    <a href="bookings.html">Bookings</a>
    <a href="reports.html">Reports</a>
    <a href="clients.html">Clients</a>
    <a href="qrcode.html" style="background:#F5141F; color:white;">QR Code</a>
  </nav>

  <!-- Content -->
  <main class="content">
    <h2 style="color:#F5141F; margin-bottom:20px;">Client QR Code</h2>

    <div style="max-width:500px; margin:0 auto; background:white; padding:20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.2); text-align:center;">
      <p>The QR code below is for client check-in:</p>
      <div id="qrContainer" style="margin:20px auto;"></div>
      <div id="clientDetails" style="margin-top:15px; text-align:left;"></div>
      <button class="book-btn" id="sendEmailBtn" style="margin-top:15px;">Send Confirmation Email</button>
    </div>

  </main>

  <footer>
    &copy; 2025 Fitness Studio. All rights reserved.
  </footer>

</div>

<!-- Include local QRCode.js -->
<script src="js/qrcode.js"></script>
<script>
  // Read booking details from URL
  const urlParams = new URLSearchParams(window.location.search);
  const client = urlParams.get('client');
  const service = urlParams.get('service');
  const slot = urlParams.get('slot');

  const qrContainer = document.getElementById('qrContainer');
  const clientDetails = document.getElementById('clientDetails');

  if(client && service && slot){
    // Generate QR code
    new QRCode(qrContainer, {
      text: `${client} - ${service} - ${slot}`,
      width: 200,
      height: 200
    });

    // Display booking info
    clientDetails.innerHTML = `
      <p><strong>Client:</strong> ${client}</p>
      <p><strong>Service / Plan:</strong> ${service}</p>
      <p><strong>Time Slot:</strong> ${slot}</p>
    `;
  } else {
    qrContainer.innerHTML = '<p style="color:red;">No booking information found. Please book a service first.</p>';
  }

  // Send Email button
  document.getElementById('sendEmailBtn').addEventListener('click', function(){
    if(client && service && slot){
      const query = `?client=${encodeURIComponent(client)}&service=${encodeURIComponent(service)}&slot=${encodeURIComponent(slot)}`;
      window.location.href = `sendemail.html${query}`;
    } else {
      alert('Booking info not available.');
    }
  });
</script>

</body>
</html>
